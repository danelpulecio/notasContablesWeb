<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:p="http://primefaces.org/ui">
	
	<h:panelGrid columns="1" width="100%" cellpadding="0" cellspacing="0" >
		
<!-- 		<p:panel id="client" style="width: 100%"   header="" toggleable="true"> -->
		<p:accordionPanel>
			<p:tab title="Cuentas" closable="true">
	<!-- 		<p:accordionPanel style="width: 100%" label="Cuentas" widgetVar="client" > -->
				<h:panelGrid width="100%" cellpadding="0" cellspacing="0" style="border-width: 0px; background-color: transparent;" id="cuentas">
					<p:dataGrid value="#{notaRefCrucePage.cuentas}"  var="cuenta" columns="8" width="100%" cellpadding="0" cellspacing="0" >
						<h:panelGrid columns="2">
							<h:selectBooleanCheckbox value="#{cuenta.seleccionada}" immediate="true"/>
							<h:outputText value="#{cuenta.cuenta}" />
						</h:panelGrid>
					</p:dataGrid>
				</h:panelGrid>
				<p:commandButton actionListener="#{notaRefCrucePage.seleccionar}" value="Seleccionar/Deseleccionar" update="cuentas"/>
				<p:inputText  styleClass="bold" value="#{notaRefCrucePage.param}" immediate="true"/>
				<p:commandButton actionListener="#{notaRefCrucePage.buscarFiltro}" value="Buscar" ajax="false" update="partPendientes"/>
			</p:tab>
		</p:accordionPanel>
<!-- 		</p:panel> -->
		<h:panelGroup id="partPendientes">
			<p:panel header="Partidas Pendientes Disponibles" style="width: 100%;" rendered="#{! empty notaRefCrucePage.partidasPendientes}">
				<p:dataTable value="#{notaRefCrucePage.partidasPendientes}" var="partida" id="tablePartDisp" rowIndexVar="rowIndex" 
							footerClass="row2" onRowMouseOver="this.style.backgroundColor='#9fbdeb'"
				            onRowMouseOut="this.style.backgroundColor='#{a4jSkin.rowBackgroundColor}'"
				            rowClasses="row1, row2"  paginator="true"
				            paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
				            currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords} registros"
				            paginatorPosition="top">
				             
					<p:column sortable="true" sortBy="#{partida.cuenta}">
	                    <f:facet name="header"><h:outputText value="Cuenta" /></f:facet>
	                    <h:outputText value="#{partida.cuenta}" />
	                </p:column>
					
					<p:column sortable="true" sortBy="#{partida.sucursalDestino}">
	                    <f:facet name="header"><h:outputText value="Suc Destino" /></f:facet>
	                    <h:outputText value="#{partida.sucursalDestino}" />
	                </p:column>
					
					<p:column sortable="true" sortBy="#{partida.naturaleza}">
	                    <f:facet name="header"><h:outputText value="Nat" /></f:facet>
	                    <h:outputText value="#{partida.naturaleza}" />
	                </p:column>
					
					<p:column sortable="true" sortBy="#{partida.divisa}">
	                    <f:facet name="header"><h:outputText value="Div" /></f:facet>
	                    <h:outputText value="#{partida.divisa}" />
	                </p:column>
					
					<p:column sortable="true" sortBy="#{partida.referenciaCruce}">
	                    <f:facet name="header"><h:outputText value="Ref Cruce" /></f:facet>
	                    <h:outputText value="#{partida.referenciaCruce}" />
	                </p:column>
					
					<p:column style="text-align: right;" sortable="true" sortBy="#{partida.importe}">
	                    <f:facet name="header" ><h:outputText value="Importe" /></f:facet>
	                    <h:outputText value="#{partida.importe}" ><f:convertNumber type="currency" /></h:outputText>
	                </p:column>
					
					<p:column sortable="true" sortBy="#{partida.concepto}">
	                    <f:facet name="header"><h:outputText value="Concepto" /></f:facet>
	                    <h:outputText value="#{partida.concepto}" />
	                </p:column>
					
					<p:column sortable="true" sortBy="#{partida.fechaContable}">
	                    <f:facet name="header"><h:outputText value="Fecha Contable" /></f:facet>
	                    <h:outputText value="#{partida.fechaContable}" />
	                </p:column>
					
					<p:column style="text-align: center;">
	                    <f:facet name="header"><h:outputText value="Agregar" /></f:facet>
	                    <p:commandButton action="#{notaRefCrucePage.adicionar}" update="partPendientes,partSeleccionadas,opcionesNotaRefCruce" value="+">
		                    <f:setPropertyActionListener for="selPart" value="true" target="#{partida.seleccionada}" />
	                    </p:commandButton>
	                </p:column>
				</p:dataTable>
			</p:panel>
		</h:panelGroup>
		<h:panelGroup id="partSeleccionadas">
			<p:panel header="Partidas Pendientes Seleccionadas" style="width: 100%;" rendered="#{! empty notaRefCrucePage.partidasSeleccionadas}">
				<p:dataTable value="#{notaRefCrucePage.partidasSeleccionadas}" var="partida" id="tablePartSel" rowIndexVar="rowIndex" 
							footerClass="row2" onRowMouseOver="this.style.backgroundColor='#9fbdeb'"
				            onRowMouseOut="this.style.backgroundColor='#{a4jSkin.rowBackgroundColor}'"
				            rowClasses="row1, row2"  paginator="true"
				            paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
				            currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords} registros"
				            paginatorPosition="top">
					
					<p:column>
	                    <f:facet name="header"><h:outputText value="Cuenta" /></f:facet>
	                    <h:outputText value="#{partida.cuenta} " />
	                </p:column>
					
					<p:column>
	                    <f:facet name="header"><h:outputText value="Suc Destino" /></f:facet>
	                    <h:outputText value="#{partida.sucursalDestino} " />
	                </p:column>
					
					<p:column>
	                    <f:facet name="header"><h:outputText value="Nat" /></f:facet>
	                    <h:outputText value="#{partida.naturaleza} " />
	                </p:column>
					
					<p:column>
	                    <f:facet name="header"><h:outputText value="Ref Cruce" /></f:facet>
	                    <h:outputText value="#{partida.referenciaCruce}" />
	                </p:column>
					
					<p:column>
	                    <f:facet name="header"><h:outputText value="Concepto" /></f:facet>
	                    <h:outputText value="#{partida.concepto}" />
	                </p:column>
					
					<p:column>
	                    <f:facet name="header"><h:outputText value="Fecha Contable" /></f:facet>
	                    <h:outputText value="#{partida.fechaContable}" />
	                </p:column>
					
					<p:column>
	                    <f:facet name="header"><h:outputText value="Div" /></f:facet>
	                    <h:outputText value="#{partida.divisa}" />
	                </p:column>
					
					<p:column style="text-align: right;">
	                    <f:facet name="header" ><h:outputText value="Importe" /></f:facet>
	                    <h:outputText value="#{partida.importe}" ><f:convertNumber type="currency" /></h:outputText>
	                </p:column>
	                
					<p:column style="text-align: center;">
	                    <f:facet name="header"><h:outputText value="Quitar" /></f:facet>
	                    <p:commandButton action="#{notaRefCrucePage.remover}" update="partPendientes,partSeleccionadas,opcionesNotaRefCruce" value="-">
	                    	<f:setPropertyActionListener for="selPart1" value="true" target="#{partida.seleccionada}" />
	                    </p:commandButton>
	                </p:column>
	                <f:facet name="footer" >
						<p:columnGroup rendered="#{! empty notaRefCrucePage.totalesNota}">
							<p:column colspan="6" style="text-align:right;"><h:outputText value="Totales" /></p:column>
							<p:column style="padding: 0px;">
								<p:dataTable style="border-width: 0px; background-color: transparent;" value="#{notaRefCrucePage.totalesNota}" var="total" >
									<p:column style="border-width: 0px;"><h:outputText value="#{total.codigoDivisa }" /></p:column>
								</p:dataTable>
							</p:column>
							<p:column style="padding: 0px;">
								<p:dataTable style="border-width: 0px; background-color: transparent;" value="#{notaRefCrucePage.totalesNota}" var="total" >
									<p:column  style="border-width: 0px; text-align:right;"><h:outputText value="#{total.total}" ><f:convertNumber type="currency" /></h:outputText></p:column>
								</p:dataTable>
							</p:column>
							<p:column ></p:column>
						</p:columnGroup>
					</f:facet>
					
				</p:dataTable>
			</p:panel>
		</h:panelGroup>
		<h:panelGrid columns="2" styleClass="center" width="100%" id="opcionesNotaRefCruce">
			<p:commandButton actionListener="#{notaRefCrucePage.guardar}" value="Enviar a Visto Bueno" update="partPendientes,partSeleccionadas,opcionesNotaRefCruce" rendered="#{! empty notaRefCrucePage.partidasSeleccionadas}"/>
			<p:commandButton value="Cancelar" actionListener="#{notaRefCrucePage.cancelar}" update="partPendientes,partSeleccionadas,opcionesNotaRefCruce"  rendered="#{! empty notaRefCrucePage.partidasSeleccionadas}"/>
		</h:panelGrid>
	</h:panelGrid>
</ui:composition>
