<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:p="http://primefaces.org/ui"
				template="../../common/template.xhtml">
	<ui:param name="title" value="Notas Contables en Cierre" />
	<ui:define name="body">

	<ui:include src="../common/flujoSubPage.xhtml" />
		<ui:include src="../notacontable/flujoNotaContablePage.xhtml" />
		<ui:include src="../notacontable/flujoNotaContableLibrePage.xhtml"/>
		<ui:include src="../notacontable/flujoNotaRefCrucePage.xhtml"/>

		<!--Filtro de busqueda	-->
		<div style="width: 950px;">
			<h:panelGrid columns="1" width="100%">
				<h1 align="center">Notas Contables en Cierre</h1>
			</h:panelGrid> 
			
			<ui:include src="../../common/mensajes.xhtml" />
			
			<!-- Tabla de registros --> 
			<h:panelGrid columns="1" width="100%" style="align:center;" id="lista">
				<p:poll listener="#{cierrePage.mostrar}" 
					rendered="#{empty precierreCierrePage.datos and facesContext.maximumSeverity == null}" 
					update="lista" 
					interval="0"/>
				<h:panelGrid columns="2" width="100%" style="text-align:center;">
					<p:commandButton value="Generar Archivo Altamira" 
						action="#{cierrePage.generarArchivoAltamira}" 
						update="lista" 
						rendered="#{!empty precierreCierrePage.datos}"/>
					<p:commandButton value="Generar Archivo Excel" 
						action="#{cierrePage.generarArchivoExcel}" 
						update="lista"
						ajax="false" 
						rendered="#{!empty precierreCierrePage.datos}"/>	
				</h:panelGrid>
				<h:panelGrid columns="4" width="100%" style="align:center;">
				
					<p:commandLink action="#{downloadGeneralPage.download}" styleClass="bold" 
							value="#{precierreCierrePage.excelFileName}" target="_blank" 
							rendered="#{precierreCierrePage.mostrarArchExc}" ajax="false" id="descarga1">
		                    <f:setPropertyActionListener for="type1" value="#{downloadGeneralPage.REPORTE_EXCEL}" target="#{downloadGeneralPage.type}" />
		                    <f:setPropertyActionListener for="file1" value="#{precierreCierrePage.excelFileName}" target="#{downloadGeneralPage.file}"/>
					</p:commandLink>
					
					<p:commandLink action="#{downloadGeneralPage.download}" id="descarga2" styleClass="bold" 
							value="#{cierrePage.INTERFAZ_CONTABLE_FILE_NAME}" target="_blank" 
							rendered="#{precierreCierrePage.mostrarArchAlt}" ajax="false">
		                    <f:setPropertyActionListener for="type2" value="#{downloadGeneralPage.TRANSMISION_ALTAMIRA}" target="#{downloadGeneralPage.type}" />
		                    <f:setPropertyActionListener for="file2" value="#{cierrePage.INTERFAZ_CONTABLE_FILE_NAME}" target="#{downloadGeneralPage.file}"/>
					</p:commandLink>
					
					<p:commandLink action="#{downloadGeneralPage.download}" id="descarga3" styleClass="bold" 
							value="#{cierrePage.PUC_FILE_NAME}" target="_blank" 
							rendered="#{precierreCierrePage.mostrarArchAlt}" ajax="false">
		                    <f:setPropertyActionListener for="type3" value="#{downloadGeneralPage.TRANSMISION_ALTAMIRA}" target="#{downloadGeneralPage.type}" />
		                    <f:setPropertyActionListener for="file3" value="#{cierrePage.PUC_FILE_NAME}" target="#{downloadGeneralPage.file}"/>
					</p:commandLink>
					
					<p:commandLink action="#{downloadGeneralPage.download}" id="descarga4" styleClass="bold" 
							value="#{cierrePage.TERCEROS_FILE_NAME}" target="_blank" 
							rendered="#{precierreCierrePage.mostrarArchAlt}" ajax="false">
		                    <f:setPropertyActionListener for="type4" value="#{downloadGeneralPage.TRANSMISION_ALTAMIRA}" target="#{downloadGeneralPage.type}" />
		                    <f:setPropertyActionListener for="file4" value="#{cierrePage.TERCEROS_FILE_NAME}" target="#{downloadGeneralPage.file}"/>
					</p:commandLink>
					
					<!-- arhivo NC_INDICAPC_NTCON.TXT -->
					<p:commandLink actionListener="#{downloadGeneralPage.download}" id="descarga5" styleClass="bold" 
							value="#{cierrePage.NC_INDICAPC}" target="_blank" 
							rendered="#{precierreCierrePage.mostrarArchAlt}" ajax="false">
		                    <f:setPropertyActionListener for="type4" value="#{downloadGeneralPage.TRANSMISION_ALTAMIRA}" target="#{downloadGeneralPage.type}" />
		                    <f:setPropertyActionListener for="file4" value="#{cierrePage.NC_INDICAPC}" target="#{downloadGeneralPage.file}"/>
					</p:commandLink>
				</h:panelGrid>
				<ui:include src="precierreCierreFormPage.xhtml" />
			</h:panelGrid>
		</div>
	</ui:define>
</ui:composition>
