<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:p="http://primefaces.org/ui"
				template="../../WEB-INF/layouts/template.xhtml">
	<ui:param name="title" value="Reporte General" />
	<ui:define name="body">

	<!--	<ui:include src="../common/flujoSubPage.xhtml" />
		<ui:include src="../notacontable/flujoNotaContablePage.xhtml" />
		<ui:include src="../notacontable/flujoNotaContableLibrePage.xhtml"/>
		<ui:include src="../notacontable/flujoNotaRefCrucePage.xhtml"/>-->

		<!--Filtro de busqueda	-->
		<div style="width: 990px;">
			<h:panelGrid columns="1" width="100%">
				<h1 align="center">Movimientos Contables</h1>
			</h:panelGrid> 
		
			<!-- Panel de opciones --> 
			<h:panelGrid id="informacion" columns="1" width="60%" cellpadding="0" cellspacing="0">
				<p:accordionPanel label="Filtro de búsqueda" width="100%"  switchType="client">
					<h:panelGrid columns="1" width="100%" cellpadding="0" cellspacing="5">
						<h:panelGrid columns="2" id="filtro">
							<h:outputText value="Sucursal Origen" />
							<h:selectOneMenu >
							    <f:selectItem itemValue="" itemLabel="Cualquiera"/>
							    <f:selectItems />
							</h:selectOneMenu>
	
							<h:outputText value="Sucursal Destino"/>
							<h:selectOneMenu >
							    <f:selectItem itemValue="" itemLabel="Cualquiera"/>
							    <f:selectItems />
							</h:selectOneMenu>
	
							<h:outputText value="Cuenta Contable" />
							<h:inputText />
	
							<h:outputText value="Número Identificación" />
							<h:inputText />
	
							<h:outputText value="Desde" />
							<p:calendar />
	
							<h:outputText value="Hasta" />
							<p:calendar />
							
							<h:outputText value="Divisa" />
							<h:selectOneMenu  >
							    <f:selectItem itemValue="" itemLabel="Cualquiera"/>
							    <f:selectItems />
							</h:selectOneMenu>
						</h:panelGrid>
	
						<h:panelGrid columns="1" styleClass="center">
							<h:commandButton reRender="informacion,lista" value="Buscar" />
						</h:panelGrid>
					</h:panelGrid>
				</p:accordionPanel>
			</h:panelGrid> 
			
			<ui:include src="../../common/mensajes.xhtml" /> 
			
			<!-- Tabla de registros --> 
			
			<h:panelGrid columns="1" width="100%" style="align:center;" id="lista">
				<h:commandButton value="Generar Archivo Excel" reRender="lista" />
				<p:commandLink styleClass="bold" target="_blank" >
					<f:param name="type1" />
					<f:param name="file1" />
				</p:commandLink>
				<p:dataTable var="dato" id="table" rows="15" rowKeyVar="rowKey" width="100%" footerClass="row2" onRowMouseOver="this.style.backgroundColor='#9fbdeb'"
					onRowMouseOut="this.style.backgroundColor='#{a4jSkin.rowBackgroundColor}'" rowClasses="row1, row2">
					<f:facet name="header">
						<p:dataScroller fastControls="false" pageIndexVar="pageIndex" pagesVar="pages" style="color:black;" for="table" maxPages="5" renderIfSinglePage="false" id="up" reRender="lista, filtro"
							limitToList="true" ajaxSingle="true">
						</p:dataScroller>
					</f:facet>
	
					<p:column sortable="true" sortBy="#{dato.NC.numeroRadicacion}">
						<f:facet name="header">
							<h:panelGroup><h:outputText value="Número" /><br /><h:outputText value="Radicación" /></h:panelGroup>
						</f:facet>
						<h:outputText value="#{dato.NC.numeroRadicacion}" />
					</p:column>
					<p:column sortable="true" sortBy="#{dato.sucursal.codigo}">
						<f:facet name="header">
							<h:outputText value="Sucursal Origen" />
						</f:facet>
						<h:panelGrid columns="2">
							<h:outputText value="#{dato.sucursal.codigo}" />
							<h:outputText value="#{dato.sucursal.nombre}" />
						</h:panelGrid>
					</p:column>
					<p:column sortable="true" sortBy="#{dato.NC.fechaRegistroAltamira}">
						<f:facet name="header">
							<h:outputText value="Fecha" />
						</f:facet>
						<h:outputText value="#{dato.NC.fechaRegistroAltamira}" />
					</p:column>
					<p:column style="text-align: right;">
						<f:facet name="header">
							<h:outputText value="Detalle de la nota contable" />
						</f:facet>
						<h:panelGrid columns="1" rendered="#{dato.NC.tipoNota eq 'R' }" width="100%">
							<p:dataTable style="border-width: 0px; background-color: transparent;" var="tema" value="#{dato.NC.temas}">
								<p:column style="border-width: 0px; text-align: left;" >
									<h:outputText value="${tema.tema.nombre}" />
								</p:column>
								<p:column style="border-width: 0px; text-align: left;" width="80" >
									<h:panelGrid columns="1" cellpadding="0" cellspacing="0">
										<h:outputText value="#{tema.partidaContable} " />
										<h:outputText value="#{tema.contrapartidaContable}" />
									</h:panelGrid>
								</p:column>
								<p:column style="border-width: 0px; text-align: left;" width="20" >
									<h:panelGrid columns="1" cellpadding="0" cellspacing="0">
										<h:outputText value="[#{tema.naturalezaPartidaContable}]" />
										<h:outputText value="[#{tema.naturalezaContrapartidaContable}]" />
									</h:panelGrid>
								</p:column>
								<p:column style="border-width: 0px; text-align: left;" width="30" >
									<h:outputText value="#{tema.codigoDivisa}" />
								</p:column>
								<p:column style="border-width: 0px; text-align:right;" width="140" >
									<h:outputText value="#{tema.monto}" ><f:convertNumber type="currency" /></h:outputText>
								</p:column>
							</p:dataTable>
						</h:panelGrid>
						<h:panelGrid columns="1" rendered="#{dato.NC.tipoNota eq 'C' }" style="width: 100%">
							<p:dataTable style="border-width: 0px; background-color: transparent;" var="temaCruce" value="#{dato.NC.temasCruce}" cellpadding="0" cellspacing="0">
								<p:column style="border-width: 0px; text-align: left;" >
									<h:outputText value="REFERENCIA DE CRUCE" />
								</p:column>
								<p:column style="border-width: 0px; text-align: left;" width="80">
									<h:outputText value="${temaCruce.cuentaContable}" />
								</p:column>
								<p:column style="border-width: 0px; text-align: left;" width="20">
									<h:outputText value="[${temaCruce.naturaleza}]" />
								</p:column>
								<p:column style="border-width: 0px; text-align: left;" width="30">
									<h:outputText value="${temaCruce.divisa}" />
								</p:column>
								<p:column style="border-width: 0px; text-align:right;" width="140">
									<h:outputText value="#{temaCruce.importe}" ><f:convertNumber type="currency" /></h:outputText>
								</p:column>
			
							</p:dataTable>
						</h:panelGrid>
						<h:panelGrid columns="1" rendered="#{dato.NC.tipoNota eq 'L' }"  width="100%">
							<p:dataTable style="border-width: 0px; background-color: transparent; " var="temaLibre" value="#{dato.NC.temasLibre}" cellpadding="0" cellspacing="0">
								<p:column style="border-width: 0px; text-align: left;" >
									<h:outputText value="CONTABILIDAD LIBRE"/>
								</p:column>
								<p:column  style="border-width: 0px; text-align: left;" width="80">
									<h:outputText value="${temaLibre.cuentaContable}" />
								</p:column>
								<p:column style="border-width: 0px; text-align: left;" width="20">
									<h:outputText value="[${temaLibre.naturalezaCuentaContable}]" />
								</p:column>
								<p:column style="border-width: 0px; text-align: left;" width="30">
									<h:outputText value="${temaLibre.codigoDivisa}" />
								</p:column>
								<p:column style="border-width: 0px; text-align:right;" width="140">
									<h:outputText value="#{temaLibre.monto}" ><f:convertNumber type="currency" /></h:outputText>
								</p:column>
							</p:dataTable>
						</h:panelGrid>
					</p:column>
	
					<p:column style="text-align: center;">
						<f:facet name="header">
							<h:panelGroup>
								<h:outputText value="Ver Nota" /><br/>
								<h:outputText value="Contable" />
							</h:panelGroup>
						</f:facet>
						<h:commandButton value="Ver" reRender="popupFlujoNotaContableVer" >
							<f:param name="codNotaVer" converter="javax.faces.Integer" />
						</h:commandButton>
						<h:commandButton value="Ver" reRender="notaContableLibreVer">
							<f:param name="codNotaLibreVer" converter="javax.faces.Integer" />
						</h:commandButton>
						<h:commandButton value="Ver" reRender="popupFlujoNotaContableRefCruceVer">
							<f:param name="codNotaRefCruceVer" converter="javax.faces.Integer" />
						</h:commandButton>
					</p:column>
					<p:column style="text-align: center;">
						<f:facet name="header">
							<h:panelGroup>
								<h:outputText value="Flujo Nota" /><br/>
								<h:outputText value="Contable" />
							</h:panelGroup>
						</f:facet>
						<h:commandButton value="Consultar" reRender="popupFlujo" >
							<f:param name="codConsultar" converter="javax.faces.Integer" />
						</h:commandButton>
					</p:column>
	
					<f:facet name="footer">
						<p:dataScroller style="color:black;" align="center" for="table" boundaryControls="hide" fastControls="hide" stepControls="hide" renderIfSinglePage="true">
							<f:facet name="pages">
								<h:outputText />
							</f:facet>
						</p:dataScroller>
					</f:facet>
				</p:dataTable>
			</h:panelGrid>
		</div>
	</ui:define>
</ui:composition>
